"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,n,t,o){var a=e._snigelConfig||{};if(e._snigelConfig=a,a.settings)try{t=a.settings.adconsent.objName}catch(e){}var i="__"+t;try{var r=function(e,n,t){I(e)&&setTimeout(function(){e(n,t)},0)},s=e[t],c=s.consent.api[o],l=s.log,u=l.debug,d=l.warn,p=l.error,f=s.event,m=f.dispatchCustomEvent,v=s.analytics.send;if(c.loaded)return void p("uspapi is tried to load again!");c.loaded=!0;var g=c.version,h=[],y=function(n){var t=e[n]||{};h.push({api:n,queue:t.queue||t.commandQueue||[]})};y(i),y(o);var b={uspApplies:c.applies,publisherPrivacyPolicyURI:null,deletionCallbacks:[],cookies:{secure:"",uspCookie:{name:"usprivacy",maxAge:31536e3,string:g+"---",available:!1,valid:!1}},gui:{uspElement:null,defaultLocale:"en",locale:null,detectedLocale:null,translationsCustomURI:null,customSupportedLocales:[],loadDefaultCSS:!0,cssURI:s.cfg.apiBaseUrl+"/adconsent"+o+".css",cssCustomURI:null}},k={en:{element:"Do not share my Personal Information",title:"Do not share my Personal Information",description:"As a California resident user, you may exercise your consumer right to opt out of any Personal Information sharing or trade with 3rd party vendors.",notice:"Please read our Explicit Notice regarding CCPA in our %$PPLS$%privacy policy%$PPLE$% page.",optOutDetail:"Share information for Personalized Advertisement",confirm:"Save & Proceed"}},C=null,L={value:"Y",notice:"N",signedLSPA:"N"},E=b.gui,S=b.cookies,P=S.uspCookie,w=function(e){return"string"==typeof e},I=function(e){return"function"==typeof e},A={getTLD:function(){function t(e){var t="snigelCookieTest="+e;return n.cookie=t+";domain="+e,-1!=n.cookie.indexOf(t)&&(n.cookie="snigelCookieTest=;domain="+e+";max-age=-1;Expires="+new Date(0).toUTCString(),!0)}if(a.cookieDomain||null===a.cookieDomain)return a.cookieDomain;var o;a.cookieDomain=null;var i=e.location.hostname.split("."),r=i.length-1;if(r>0)for(o="."+i[r];r>0;)if(t(o="."+i[--r]+o)){a.cookieDomain=o;break}return a.cookieDomain||t(o=e.location.hostname)&&(a.cookieDomain=o),e.location.protocol.toLowerCase().indexOf("s")>0&&(S.secure=";Secure"),u("detected TLD: '"+a.cookieDomain+"', secure: "+(S.secure.length>0)),a.cookieDomain},getCookie:function(e){var t="; "+n.cookie,o=t.split("; "+e+"=");if(o.length>=3&&(n.cookie=e+" =;;path=/;max-age=-1;Expires="+new Date(0).toUTCString(),o=(t="; "+n.cookie).split("; "+e+"=")),o.length>=2)return o[o.length-1].split(";").shift()},setCookie:function(e,t,o){A.getTLD()&&(n.cookie=e+"="+t+";domain="+_snigelConfig.cookieDomain+";path=/;max-age="+o+";Expires="+new Date(o>0?Date.now()+1e3*o:0).toUTCString()+";sameSite=Lax"+S.secure)},deleteCookie:function(e){A.setCookie(e,"",-1)},getJSON:function(e,n,t){var o=new XMLHttpRequest;o.onload=function(){if(n)try{n(JSON.parse(o.responseText))}catch(e){t&&t(o)}},o.onerror=function(){p("HTTP"+o.status+" ("+o.statusText+"): '"+e+"'"),t&&t(o)},o.open("GET",e,!0),o.send()},getBrowserLocale:function(){return(navigator.language||navigator.userLanguage).split("-")[0].toLowerCase()}},U=function(){f.dispatchCustomEventConsent("N"==L.value?3:1,"N"==L.value?3:1)},D={getUSPData:{api:[o],afterEvent:"cmpConsentChecked",action:function(e,n,t,o){null===o||parseInt(o)===g?r(n,{version:g,uspString:P.string},!0):r(n,{},!1)}},setSignedLSPA:{api:[o],afterEvent:"cmpLoaded",beforeEvent:"cmpReady",action:function(e,n){L.signedLSPA=e?"Y":"N",r(n,{},!0)}},setUSPLink:{api:[o],afterEvent:"cmpLoaded",beforeEvent:"cmpReady",action:function(e,t){var o=w(e)?n.getElementById(e):e;o&&o.style?(o.style.display="none",E.uspElement=o,r(t,null,!0)):r(t,{message:"ERROR: Expected either a document element or the element id, but none was provided. Ignoring"},!1)}},registerDeletion:{api:[o],afterEvent:"cmpLoaded",action:function(e,n){I(n)?(b.deletionCallbacks.push(n),u("Vendor deletion callback added.")):p("ERROR: Provided callback is not a function.")}},performDeletion:{api:[o],afterEvent:"cmpLoaded",action:function(e){u("Going to perform user data deletion for each registered vendor."),b.deletionCallbacks.forEach(function(n){r(n,e)})}},getUSPApplies:{afterEvent:"cmpLoaded",action:function(e,n){r(n,b.uspApplies,!0)}},setPrivacyPolicy:{afterEvent:"cmpLoaded",beforeEvent:"cmpGUIShow",action:function(e,n){w(e)&&e.length>0?(b.publisherPrivacyPolicyURI=e,L.notice="Y",r(n,{message:"Set Privacy Policy URI to  '"+e+"'."},!0)):r(n,{message:"ERROR: setPrivacyPolicy expects a parameter of type non-empty 'string'."+(e?" Passed parameter: "+_typeof(e)+":'"+e.toString()+"'":"")},!1)}},setTranslationFiles:{afterEvent:"cmpLoaded",beforeEvent:"cmpConsentChecked",action:function(e,n){if(e&&(o=e.locales,Array.isArray(o))&&w(e.path)){E.translationsCustomURI=e.path||null;for(var t=0;t<e.locales.length;t++)E.customSupportedLocales.push(e.locales[t].toLowerCase());r(n,{},!0)}else r(n,{message:"ERROR: setTranslationFiles expects parameter Object{ path: String, locales: Array(String) }."},!1);var o}},showGUI:{afterEvent:"cmpConsentChecked",action:function(e,n){H(),r(n,{message:"Showing GUI."},!0)}},getDefaultTranslation:{afterEvent:"cmpLoaded",action:function(e,n){r(n,k[E.defaultLocale],!0)}},getVersion:{afterEvent:"cmpLoaded",action:function(e,n){r(n,s.version,!0)}},start:{ignore:!0},setPublisherCC:{ignore:!0},enableGoogleAnalytics:{ignore:!0}},R=function(e,t,o,a,i){u("Processing command  '"+e+"(parameter, callback)'",{parameter:a,callback:o});var s=D[e];if(s&&(!s.api||s.api.indexOf(i)>=0)){if(!s.ignore){var c=s.beforeEvent,l=s.afterEvent,m=s.action||function(){},v=s.deprecated;v&&d("Command '"+e+(s.action?"' is deprecated and will be removed soon.":"' has been removed from the API.")+(w(v)?v:"")),c&&f.fired[c]?r(o,{message:"Error: '"+e+"' needs to be called before '"+c+"'. Ignoring command."},!1):!l||f.fired[l]?(u("Executing '"+e+"'"),m(a,o,i,t)):(u("Queueing '"+e+"' until event '"+l+"'"),n.addEventListener(l,function(){u("Executing queued command '"+e+"'"),m(a,o,i,t)}))}}else{var g="Unknown "+i+"() API call '"+e+"'";p(g),r(o,{message:"Error: "+g},!1)}},x=function(){return b.uspApplies&&!P.valid},T=function(){b.uspApplies?N():(u("CCPA does not apply to current impression."),G()),m("cmpConsentChecked",null,!0)},N=function(){var e,n,t,o;e=P,n="US privacy consent",t=A.getCookie(e.name),u(n+" cookie found: ",o=void 0!==t),e.available=o,e.string=t||null,P.available&&(u("Decoding US privacy consent cookie string '"+P.string+"'."),P.valid=function(){var e=P.string,n=!0;if(null===e)u("No US privacy consent information available."),n=!1;else{if(4!=e.length)n=!1;else if(parseInt(e[0])!=g)n=!1;else for(var t=1;t<e.length;t++){var o=e[t];if("Y"!=o&&"N"!=o){n=!1;break}switch(t){case 1:L.notice=o;break;case 2:L.value=o}}n||u("US privacy consent information is invalid.")}return u("US privacy consent cookie valid: ",n),n}())},O=function(e){L.value=e?"N":"Y"},_=function(){return b.uspApplies?g+L.notice+L.value+L.signedLSPA:g+"---"},G=function(){P.valid=!0,P.string=_()},$=function(e,t,o,a,i){var r=n.createElement(e);return t&&(r.id="adconsent-usp-"+t),a&&(r.className=a),o&&o.appendChild(r),i&&(r.innerHTML=q(i)),r},q=function(e){if(e){var n=E.locale,t=E.defaultLocale,o=k[n],a=k[t];return o=o?o[e]:null,a=a?a[e]:null,o||(a||"{%%"+e+"%%}")}return""},B=function(){var t=function(e){w(e)&&(e=n.getElementById(e)),"none"===e.style.display&&(e.style.display="")},o=function(e){w(e)&&(e=n.getElementById(e)),e.style.display="none"},a=function(e){var t=n.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,n.head.appendChild(t)},i=function(e,t){var o=n.createElement("label");o.className="adconsent-usp-switch";var a=n.createElement("input");a.id=e,a.type="checkbox",a.checked=t,o.appendChild(a);var i=n.createElement("span");return i.className="adconsent-usp-slider",o.appendChild(i),o};return function(){var r=function(e){if("none"!==d.style.display){var n=e.clientX-d.offsetLeft,t=e.clientY-d.offsetTop;(n<0||n>=d.offsetWidth||t<0||t>=d.offsetHeight)&&s()}},s=function(){o(d),e.removeEventListener("click",r)};null!==E.cssCustomURI?a(E.cssCustomURI):!0===E.loadDefaultCSS&&a(E.cssURI);var c=E.uspElement;c||(c=$("div","link",n.body,null,"element"),E.uspElement=c),c.onclick=function(e){e.stopPropagation(),H()},x()?t(c):o(c);var l,u=$("div","container");if(null!==b.publisherPrivacyPolicyURI&&(l="<a target='_blank' href='"+b.publisherPrivacyPolicyURI+"'>"),b.uspApplies){var d=$("div","banner",u);s();var p=$("div","banner-wrapper",d),f=$("div","banner-main",p),m=$("div","banner-content",f),v=$("div","banner-right",p),g=$("div","banner-buttons",v);$("div","banner-btn",g,null,"confirm").onclick=function(){s(),o(c),F()};var h=$("div","banner-header",m);if($("div","banner-heading",h,null,"title"),$("div","banner-desc",m,"adconsent-usp-banner-desc","description"),l){var y=$("div","banner-notice",m,"adconsent-usp-banner-desc","notice");y.innerHTML=y.innerHTML.replace("%$PPLS$%",l).replace("%$PPLE$%","</a>")}$("br",null,m);var k=$("div","banner-optout",m);$("div","banner-optout-text",k,null,"optOutDetail");var C=i("optout","N"==L.value);C.addEventListener("change",function(e){O(e.target.checked)}),k.appendChild(C)}return n.body?n.body.appendChild(u):n.addEventListener("DOMContentLoaded",function(){n.body.appendChild(E.uspElement),n.body.appendChild(u)}),{show:function(){b.uspApplies&&(t(d),setTimeout(function(){e.addEventListener("click",r)},0))}}}()},F=function(){G(),b.uspApplies&&A.setCookie(P.name,P.string,P.maxAge),u("Setting consent cookies."),v("GuiSubmit"),m("cmpGUISubmit",{detail:{uspApplies:b.uspApplies}}),U()},H=function(n){var t=function(){C=C||B(),n||(v("GuiShow"),m("cmpGUIShow",{detail:{locale:{detectedLocale:E.detectedLocale,usedLocale:E.locale},isFirstConsentRequest:!P.available,uspApplies:b.uspApplies}}),C.show())};null===C?function(){u("Available default translations: ",k),u("Custom supported locales: ",E.customSupportedLocales);var n,o,a,i,r=function(){var n=E.locale,t=E.defaultLocale,o=E.detectedLocale;if(!o){var a=null;try{a=e.sessionStorage.getItem("adconsentOverrideNavigatorLocale")}catch(e){}null!==a&&(a=a.toLowerCase(),u("Found sessionStorage navigator local override:",a)),o=a||A.getBrowserLocale(),(n=n||o)!=t&&-1===E.customSupportedLocales.indexOf(n)&&(u("Detected locale '"+n+"' not supported. Skipping loading translation file and falling back to default locale '"+t+"'."),n=t),E.locale=n,E.detectedLocale=o,u("Detected locale '"+n+"'.")}return n}(),s=E.defaultLocale,c=E.translationsCustomURI;null!==c&&-1!==E.customSupportedLocales.indexOf(r)?(r===s&&u("Found custom translation for default locale '"+s+"'."),n=c,o="Publisher",a=r.toLowerCase(),u("Loading "+o+" translations for locale '"+a+"': ",i=n+"/"+r+".json"),A.getJSON(i,function(e){var n=k[r]||{};if(e)for(var a=Object.keys(e),i=0;i<a.length;i++)n[a[i]]=e[a[i]];k[r]=n,u(o+" translation available: ",e),t()},function(e){u("Unable to get "+o+" translations file for locale '"+a+"'."),t()})):t()}():t()};Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.addEventListener("cmpReady",function(e){T()}),n.addEventListener("cmpConsentChecked",function(e){x()&&(A.deleteCookie(P.name),O(!0),P.string=_(),H(!0)),U()}),e[i]=function(e,n,t,o){R(e,n,t,o,i)},e[o]=function(e,n,t,a){R(e,n,t,a,o)},m("cmpLoaded",null,!0),function(){if(u("Processing commandQueue:",h),h.length>0){var e=h;h=[];for(var n=0;n<e.length;n++){var t=e[n],o=t.api;t=t.queue;for(var a=0;a<t.length;a++){var i=t[a];R(i.command,i.version,i.callback,i.parameter,o)}}}}(),m("cmpReady",{detail:{uspApplies:b.uspApplies}},!0)}catch(e){if(window.argus&&window.argus.cmd.push(function(){window.argus.queueError("adconsent",{stack:e.stack})}),a.passThroughException)throw e;console.error(e)}}(window,document,"adconsent","__uspapi");